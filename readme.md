[![Flems](https://img.shields.io/badge/playground-playground?labelColor=34454d&color=34454d&logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNSAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIzLjY2NCA5LjE2TDE4LjIxNiAzLjczNkMxOC4xMiAzLjYxNiAxNy45NTIgMy41NDQgMTcuODA4IDMuNTQ0SDE3LjEzNkMxNi4zMiAzLjU0NCAxNS41NzYgNC4wNzIgMTUuMzEyIDQuODY0TDE0LjI4IDcuOTZDMTQuMjA4IDguMiAxNC4zNzYgOC40NjQgMTQuNjQgOC40NjRIMTYuNDY0QzE2LjcyOCA4LjQ2NCAxNi44OTYgOC43MDQgMTYuODI0IDguOTQ0TDE2LjEwNCAxMS4xMjhDMTYuMDA4IDExLjM2OCAxNS43OTIgMTEuNTM2IDE1LjUyOCAxMS41MzZIMTMuNTM2QzEzLjI3MiAxMS41MzYgMTMuMDU2IDExLjcwNCAxMi45NiAxMS45NDRMMTEuNDk2IDE2LjM4NEMxMS4wNCAxNy43MjggMTAuMDMyIDE4Ljc2IDguNzU5OTkgMTkuMjRDOS4wMjM5OSAxOS41MjggOS4yNjM5OSAxOS41MjggOS40MzE5OSAxOS41MjhIMTQuNzEyQzE0Ljg4IDE5LjUyOCAxNS4wMjQgMTkuNDggMTUuMTQ0IDE5LjM2TDIzLjY2NCAxMC44NEMyNC4xMiAxMC4zODQgMjQuMTIgOS42MTYgMjMuNjY0IDkuMTZaTTkuNjk1OTkgMTIuMDRDOS43Njc5OSAxMS44IDkuNTc1OTkgMTEuNTM2IDkuMzM1OTkgMTEuNTM2SDcuNTM1OTlDNy4yOTU5OSAxMS41MzYgNy4xMjc5OSAxMS4yOTYgNy4xOTk5OSAxMS4wOEw3Ljk0Mzk5IDguODcyQzguMDE1OTkgOC42MDggOC4yMzE5OSA4LjQ2NCA4LjQ5NTk5IDguNDY0SDEwLjQ0QzEwLjcwNCA4LjQ2NCAxMC45MiA4LjI5NiAxMS4wMTYgOC4wNTZMMTIuNDggMy42MTZDMTIuOTEyIDIuMjcyIDEzLjk0NCAxLjI0IDE1LjIxNiAwLjc2QzE1LjEzMjkgMC42NjQ0NTcgMTUuMDI5MyAwLjU4ODkyNiAxNC45MTMgMC41MzkwNTRDMTQuNzk2NiAwLjQ4OTE4MyAxNC42NzA1IDAuNDY2MjYgMTQuNTQ0IDAuNDcySDkuMjg3OTlDOS4xNDM5OSAwLjQ3MiA4Ljk3NTk5IDAuNTIgOC44Nzk5OSAwLjY0TDAuMzU5OTkgOS4xNkMwLjI0ODIzNyA5LjI2OTUgMC4xNTk0NTYgOS40MDAxOSAwLjA5ODg0NzEgOS41NDQ0M0MwLjAzODIzNzkgOS42ODg2NiAwLjAwNzAxOTA0IDkuODQzNTUgMC4wMDcwMTkwNCAxMEMwLjAwNzAxOTA0IDEwLjE1NjUgMC4wMzgyMzc5IDEwLjMxMTMgMC4wOTg4NDcxIDEwLjQ1NTZDMC4xNTk0NTYgMTAuNTk5OCAwLjI0ODIzNyAxMC43MzA1IDAuMzU5OTkgMTAuODRMNS43ODM5OSAxNi4yNjRDNS45MDM5OSAxNi4zODQgNi4wNDc5OSAxNi40NTYgNi4xOTE5OSAxNi40NTZINi44Mzk5OUM3LjY1NTk5IDE2LjQ1NiA4LjM5OTk5IDE1LjkwNCA4LjY2Mzk5IDE1LjEzNkw5LjY5NTk5IDEyLjA0WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==)](https://flems.io/#0=N4IgtglgJlA2CmIBcB2ADAOgCwGYA0IAZhAgM7IDaoAdgIZiJIgYAWALmLCAQMYD21NvEHIQAHgC0EgAQAleKQgAveNIDKPAE7xh3EKXgIebCAPJM0SAIwoQAXzw16jZgCtyvAUJFMIYAA58mmzSAFTStKTSAG7+0oSafGDSAOTsbP6kSAD02QCu1P4A1gDmGPxg2QCOsSkAOtQNsRikWjrUpAAUFA3S0sC9fdLQSKmkYCl4g31VefCaAJ6jKZ1gtAAeEgDu0GwsowCsKABs-usAlJPT0gIQ1BBso53n0gC8AHz91338HXwIGFgfBKnRSAElqNE+EV4FAbtRYAtpFZpCYGNI8oFqNJhEJNHcSilzgBua4Oa4CXHzJ4vD79IbSb7SX6kf7wQHA0EabTCaSKFTDKIAI0MfC20iOp3WRNJ2KG5LlfUp6weNLenwGiqGLLZHJBKW57T5ylUECitCFfGiqklZxlZMGDkZcs1DJGqTAUCuWtm8yWqVWd22u320hOAA4zi9aNQ4asNsGoHtRgBOFMAJij3oZlME1Okz3V9KZOoBQP1ht5-NUFqtqgjZ2kQryIRFQPFacz0pJZKmWoE2mro3WRddDOZZl15a5bSrJsFy2kAGppBdZQyFTnqPAVY8C7SNSXJ2XOSkADLwQghPaqaIQeBbQLBe1auyOhoAXRJegMRhMZlEKwDiQA57EcEA6AYURmjYDwQF+bw2Gg2hNGkTRXm3cUAFlaH8YlCAKYxTGxQhOngPBqHOYAEGvDDiW0Ng8k0EjCP-ahnmo+AQggV5ng+YA2AwvJYFgPB2Vw-xEU6PYzTwFCSjyBhBFIc47GJNgADINJ4GMeEMABBe41jYgAxTRnGk848EE7RfVINhDL8WhTPMhhOggVS7AI6giIEDEyIoqi2AWfx4D4QgcQwXM8VeV46iIVjiPirTqCi7c800DBaBgMi0qpTQrOC0Lwsi5UHli+LvN8xoQBSvLdyynL2TKthCpCsKIua6hBxNCqEp8tjko01KBwUE1GqgXLRurNris6tK7nKuL+uqoaRvue42AmqaNoeVSqrY6QwDIqiaOkahXnZX1FgAHxu+LaBE+LrNeYARnZaA8GupZqDkojrSQABCKxrIUR5jJ4FgsNhCBaE6Si8Gi6lMPULjEe3XckBRtQ0emk0sYfVG2HRxbHmxri1LyALWuJM6eL494BIWzaWhNd40C06TmYeDBCCCABRWhIc6PgPj4Z5Cu5raeAQFCJesvKMt5gWhZYEWxflrahZMa1XkBtAHB4Xjzn4raWuVzRBeF0X3nF85Je1iBdeBhx-FeG2ze6saVAtq21eiD5ohF+31IwIR7IwCGWAULSIGeWmuIiXjgCjhQkD4OwTdtgB+OPziQHhnjwWBjY+Lbw627QwDrM8zW8eZOloEkGKY7Fy7Biba-s4QG6bxwkc0JAIHRndVR4dGepUJB-DwKAwcSJZRJKRPWh5diqJb5jUTsHfohQ6Qtku-iIFI-TNHMhYMDNM+L5O85N+xdk+ct1XOi2EkT86QHOni6Bf8f+2exEjihRvzc+QRQQ1H8KMLCZpFDUBKBEbEv8oDxTQpeeYwg9IyjOhdY68ArJvSgEgNgdgMItFnNQeirMVB3WylAfm1pBBd3rpoH+IBJ7wGeqRBmwBMrPz9u5Y+FC15ZX+vAWOaVOFvzuFAMUV9qDbk0AAdRDKpVSeB0wHCsvrKymUWCREstnUs7ItgoXYgAAygaMAAKtHYYcJ4oABIBJvhAIKCIsBtDZSRHPYg24oB4AxAYaQUDtovDuN3bKGALH50ygYNg0lAoOCgEfd4+jDEEOzplZeiSCFAxBiUXi5FKL8TOoJSaBDiSf0ErFYG98uKtwnH8AE8xEhsKsbEWx0dtAeOoHwGI95HxBBCHkeBiCYwOJuBFZxwB4BuNicSKmv0tqr3aJLNZwgw4d1TqQLSnt8rPAcAsNJnEQgXRvrQS+CQkidEynvWAcwuj20jrhTonRgCbOoCQzOZdm6NK3vAbOqViCwDxO8ohPys4fR8o8ueXRWr52oA4UgpzcGvAWPHT+BCznDFeJU-5jEt4QFziI9oYidbwAKXYcp5DQXgo+Y7AGEBfnvB4nUtAhKmlbQQAgvY7wrDZ0eGwCgaAPwOBYMUiiy0pggCzkVDqOI+r2XxAg+K2cYVz3WAAeVIpRd4EhBXslIJJB48NzgtCSPAToKkgaAy6Pk41VqbVWXWKcjJDrzicxyVxE6GB4VsAXkXTKc8aLWoIRopQpdGZVzrIw3ELCe5sPipw7h8t+Eq2FvAD47IA1BvtngTKMt4By1UsSHcT42CfIiOacReAJnmhgHgJQNbpB5r4AsWerbcl4CRJEaQsA654BHP22N1o8Din7V80geAWCtoroW1td4HyVtIGpBoegKj+BIPMUQsEfyGHgNVcwIArBIDQGBJwUEmDlFIHBBCuJRD2HFUAA)

# qvp

A tiny (1kb gzipped) media query utility for programmatic control in different screen viewports within the browser.

### Install

The module is shipped for ESM consumption in the Browser.

```bash
pnpm add qvp
```

[Flems Playground](https://flems.io/#0=N4IgtglgJlA2CmIBcB2ADAOgCwGYA0IAZhAgM7IDaoAdgIZiJIgYAWALmLCAQMYD21NvEHIQAHgC0EgAQAleKQgAveNIDKPAE7xh3EKXgIebCAPJM0SAIwoQAXzw16jZgCtyvAUJFMIYAA58mmzSAFTStKTSAG7+0oSafGDSAOTsbP6kSAD02QCu1P4A1gDmGPxg2QCOsSkAOtQNsRikWjrUpAAUFA3S0sC9fdLQSKmkYCl4g31VefCaAJ6jKZ1gtAAeEgDu0GwsowCsKABs-usAlJPT0gIQ1BBso53n0gC8AHz91338HXwIGFgfBKnRSAElqNE+EV4FAbtRYAtpFZpCYGNI8oFqNJhEJNHcSilzgBua4Oa4CXHzJ4vD79IbSb7SX6kf7wQHA0EabTCaSKFTDKIAI0MfC20iOp3WRNJ2KG5LlfUp6weNLenwGiqGLLZHJBKW57T5ylUECitCFfGiqklZxlZMGDkZcs1DJGqTAUCuWtm8yWqVWd22u320hOAA4zi9aNQ4asNsGoHtRgBOFMAJij3oZlME1Okz3V9KZOoBQP1ht5-NUFqtqgjZ2kQryIRFQPFacz0pJZKmWoE2mro3WRddDOZZl15a5bSrJsFy2kAGppBdZQyFTnqPAVY8C7SNSXJ2XOSkADLwQghPaqaIQeBbQLBe1auyOhoAXRJegMRhMZlEKwDiQA57EcEA6AYURmjYDwQF+bw2Gg2hNGkTRXm3cUAFlaH8YlCAKYxTGxQhOngPBqHOYAEGvDDiW0Ng8k0EjCP-ahnmo+AQggV5ng+YA2AwvJYFgPB2Vw-xEU6PYzTwFCSjyBhBFIc47GJNgADINJ4GMeEMABBe41jYgAxTRnGk848EE7RfVINhDL8WhTPMhhOggVS7AI6giIEDEyIoqi2AWfx4D4QgcQwXM8VeV46iIVjiPirTqCi7c800DBaBgMi0qpTQrOC0Lwsi5UHli+LvN8xoQBSvLdyynL2TKthCpCsKIua6hBxNCqEp8tjko01KBwUE1GqgXLRurNris6tK7nKuL+uqoaRvue42AmqaNoeVSqrY6QwDIqiaOkahXnZX1FgAHxu+LaBE+LrNeYARnZaA8GupZqDkojrSQABCKxrIUR5jJ4FgsNhCBaE6Si8Gi6lMPULjEe3XckBRtQ0emk0sYfVG2HRxbHmxri1LyALWuJM6eL494BIWzaWhNd40C06TmYeDBCCCABRWhIc6PgPj4Z5Cu5raeAQFCJesvKMt5gWhZYEWxflrahZMa1XkBtAHB4Xjzn4raWuVzRBeF0X3nF85Je1iBdeBhx-FeG2ze6saVAtq21eiD5ohF+31IwIR7IwCGWAULSIGeWmuIiXjgCjhQkD4OwTdtgB+OPziQHhnjwWBjY+Lbw627QwDrM8zW8eZOloEkGKY7Fy7Biba-s4QG6bxwkc0JAIHRndVR4dGepUJB-DwKAwcSJZRJKRPWh5diqJb5jUTsHfohQ6Qtku-iIFI-TNHMhYMDNM+L5O85N+xdk+ct1XOi2EkT86QHOni6Bf8f+2exEjihRvzc+QRQQ1H8KMLCZpFDUBKBEbEv8oDxTQpeeYwg9IyjOhdY68ArJvSgEgNgdgMItFnNQeirMVB3WylAfm1pBBd3rpoH+IBJ7wGeqRBmwBMrPz9u5Y+FC15ZX+vAWOaVOFvzuFAMUV9qDbk0AAdRDKpVSeB0wHCsvrKymUWCREstnUs7ItgoXYgAAygaMAAKtHYYcJ4oABIBJvhAIKCIsBtDZSRHPYg24oB4AxAYaQUDtovDuN3bKGALH50ygYNg0lAoOCgEfd4+jDEEOzplZeiSCFAxBiUXi5FKL8TOoJSaBDiSf0ErFYG98uKtwnH8AE8xEhsKsbEWx0dtAeOoHwGI95HxBBCHkeBiCYwOJuBFZxwB4BuNicSKmv0tqr3aJLNZwgw4d1TqQLSnt8rPAcAsNJnEQgXRvrQS+CQkidEynvWAcwuj20jrhTonRgCbOoCQzOZdm6NK3vAbOqViCwDxO8ohPys4fR8o8ueXRWr52oA4UgpzcGvAWPHT+BCznDFeJU-5jEt4QFziI9oYidbwAKXYcp5DQXgo+Y7AGEBfnvB4nUtAhKmlbQQAgvY7wrDZ0eGwCgaAPwOBYMUiiy0pggCzkVDqOI+r2XxAg+K2cYVz3WAAeVIpRd4EhBXslIJJB48NzgtCSPAToKkgaAy6Pk41VqbVWXWKcjJDrzicxyVxE6GB4VsAXkXTKc8aLWoIRopQpdGZVzrIw3ELCe5sPipw7h8t+Eq2FvAD47IA1BvtngTKMt4By1UsSHcT42CfIiOacReAJnmhgHgJQNbpB5r4AsWerbcl4CRJEaQsA654BHP22N1o8Din7V80geAWCtoroW1td4HyVtIGpBoegKj+BIPMUQsEfyGHgNVcwIArBIDQGBJwUEmDlFIHBBCuJRD2HFUAA)

# Basic Usage

The module uses named exports, so assign a default.

```js
import * as vp from 'qvp';

vp.screens([
  {
    id: 'sm',
    query: '(max-width: 576px)',
    onenter: () => {
      console.log('Screen size is below 576px');
    },
    onexit: () => {
      console.log('Screen size is above 576px');
    }
  },
  {
    id: 'md',
    query: '(min-width: 768px) and (max-width: 992px)',
    onenter: () => {
      console.log('Screen size above 768px but below 992px');
    },
    onresize: x => {
      console.log('Screen size is: ' + x);
    },
    onexit: () => {
      console.log('Left the viewport');
    }
  }
]);
```

> You can optionally choose to provide an `{}` instead of array list. The `id` value is **required** and if no `query` is provided it will default to `all`.

### Methods

The module provides several helpful methods for querying and retrieving context of the browsers screen.

<!-- prettier-ignore -->
```ts
import * as vp from 'qvp';

vp.add(id, {})                    // Extends the screen with new methods
vp.get(id)                        // Returns the viewport and screen matching the id
vp.active()                       // List of active screens or single screen
vp.active(id)                     // Boolean indicating whether the screen is active
vp.list()                         // List of viewport screens states
vp.list(ids[])                    // List of viewport screen states matching the ids
vp.test(id | id[], separator?)    // Test utility for validating screens
vp.remove(id)                     // Remove a viewport matching the id from store
vp.destroy()                      // Tear down and remove all instances

```

### Store

The module maintains a store within a constant named `viewports` which you can access as a named import. The store is maintained within a `Map`and each `key` value uses the screen ids, that values hold the screen instances.

<!-- prettier-ignore -->
```ts
import { viewports } from 'qvp';

viewports.forEach(viewport => {


  // SCREEN INSTANCE GETTER

  viewport.screen            // The screen instance
  viewport.screen.id         // The screen id value
  viewport.screen.query      // The media query value
  viewport.screen.active     // A boolean value indicating whether the viewport is active
  viewport.screen.oninit     // A Set list of methods to invoke oninit
  viewport.screen.onenter    // A Set list of methods to invoke onenter
  viewport.screen.onexit     // A Set list of methods to invoke onexit
  viewport.screen.onresize   // A Set list of methods to invoke when resizing

  // METHOD TRIGGERS

  viewport.oninit()          // Calls all methods in screen.oninit Set (null if already invoked)
  viewport.onenter()         // Calls all methods in screen.onenter Set
  viewport.onexit()          // Calls all methods in screen.onexit Set
  viewport.onresize()        // Calls all methods in screen.onresize Set

})

```
